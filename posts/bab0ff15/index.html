<!DOCTYPE html><html class="theme-next mist use-motion" lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet"><style>.pace .pace-progress{background:#1e92fb;height:3px}.pace .pace-progress-inner{box-shadow:0 0 10px #1e92fb,0 0 5px #1e92fb}.pace .pace-activity{border-top-color:#1e92fb;border-left-color:#1e92fb}</style><script>!function(e,t,o,c,i,a,n){e.DaoVoiceObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(o),n=t.getElementsByTagName(o)[0],a.async=1,a.src=c,a.charset="utf-8",n.parentNode.insertBefore(a,n)}(window,document,"script",("https:"==document.location.protocol?"https:":"http:")+"//widget.daovoice.io/widget/0f81ff2f.js","daovoice"),daovoice("init",{app_id:"f09a7d26"}),daovoice("update")</script><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0"><link rel="stylesheet" href="/css/main.css?v=7.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.2.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.2.0"><link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222"><script id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",version:"7.2.0",sidebar:{position:"left",display:"post",offset:12,onmobile:!1,dimmer:!1},back2top:!0,back2top_sidebar:!1,fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="最近工作比较忙，然后最近也在尝试着翻译一篇关于 CALayer 非常详解的一篇文章，文章还是比较好也比较长的，等整理完了再发布出来吧。所以也没啥多余的时间写些东西，就先来分享一下开发中的一些小 Tips 吧"><meta name="keywords" content="iOS, 倒计时"><meta property="og:type" content="article"><meta property="og:title" content="iOS 一句代码解决倒计时问题"><meta property="og:url" content="https://www.clearloveway.com/posts/bab0ff15/index.html"><meta property="og:site_name" content="HenryCheng"><meta property="og:description" content="最近工作比较忙，然后最近也在尝试着翻译一篇关于 CALayer 非常详解的一篇文章，文章还是比较好也比较长的，等整理完了再发布出来吧。所以也没啥多余的时间写些东西，就先来分享一下开发中的一些小 Tips 吧"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://upload-images.jianshu.io/upload_images/571495-92c1547f64ea24f6.gif?imageMogr2/auto-orient/strip"><meta property="og:image" content="https://upload-images.jianshu.io/upload_images/571495-660b933d7d87c45b.gif?imageMogr2/auto-orient/strip"><meta property="og:updated_time" content="2019-07-07T09:32:18.027Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="iOS 一句代码解决倒计时问题"><meta name="twitter:description" content="最近工作比较忙，然后最近也在尝试着翻译一篇关于 CALayer 非常详解的一篇文章，文章还是比较好也比较长的，等整理完了再发布出来吧。所以也没啥多余的时间写些东西，就先来分享一下开发中的一些小 Tips 吧"><meta name="twitter:image" content="https://upload-images.jianshu.io/upload_images/571495-92c1547f64ea24f6.gif?imageMogr2/auto-orient/strip"><link rel="alternate" href="/atom.xml" title="HenryCheng" type="application/atom+xml"><link rel="canonical" href="https://www.clearloveway.com/posts/bab0ff15/"><script id="page.configurations">CONFIG.page={sidebar:""}</script><title>iOS 一句代码解决倒计时问题 | HenryCheng</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><script type="text/javascript" src="/js/clicklove.js"></script><div class="bg_content"><canvas id="canvas"></canvas></div><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><a href="https://github.com/Loveway" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#fff;color:#151513;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">HenryCheng</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">那时我们有梦，关于文学，关于爱情，关于穿越世界的旅行 如今我们深夜饮酒，杯子碰到一起，都是梦破碎的声音。</p></div><div class="site-nav-toggle"><button aria-label="切换导航栏"><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.clearloveway.com/posts/bab0ff15/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="HenryCheng"><meta itemprop="description" content="这里荒芜寸草不生 后来你来这走了一遭 奇迹般万物生长 这里是我的心"><meta itemprop="image" content="/uploads/loveway.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="HenryCheng"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">iOS 一句代码解决倒计时问题</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2016-01-05 00:00:00" itemprop="dateCreated datePublished" datetime="2016-01-05T00:00:00+08:00">2016-01-05</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2019-07-07 17:32:18" itemprop="dateModified" datetime="2019-07-07T17:32:18+08:00">2019-07-07</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Objective-C/" itemprop="url" rel="index"><span itemprop="name">Objective-C</span></a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-"></i> 阅读次数：<span class="busuanzi-value" id="busuanzi_value_page_pv"></span></span></span><br></div></header><div class="post-body" itemprop="articleBody"><p>最近工作比较忙，然后最近也在尝试着翻译一篇关于 <code>CALayer</code> 非常详解的一篇文章，文章还是比较好也比较长的，等整理完了再发布出来吧。所以也没啥多余的时间写些东西，就先来分享一下开发中的一些小 <code>Tips</code> 吧<a id="more"></a>。</p><h2 id="倒计时问题"><a href="#倒计时问题" class="headerlink" title="倒计时问题"></a>倒计时问题</h2><p>在开发中经常遇到倒计时倒计时问题，写一个 <code>Button</code> ，然后各种判断各种状态，好多代码感觉很乱，下面就分享一下，一句话解决倒计时问题的例子（当然不是万能的，只适合大部分普通的倒计时^_^）！<br>先看效果</p><p><img src="https://upload-images.jianshu.io/upload_images/571495-92c1547f64ea24f6.gif?imageMogr2/auto-orient/strip" alt="倒计时按钮的效果"><br>再看看我们的代码</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  ViewController.m</span></span><br><span class="line"><span class="comment">//  HWCountdownDemo</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by HenryCheng on 16/1/4.</span></span><br><span class="line"><span class="comment">//  Copyright © 2016年 www.igancao.com. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">"ViewController.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">"UIButton+countDown.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">ViewController</span> ()</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">weak</span>, <span class="keyword">nonatomic</span>) <span class="keyword">IBOutlet</span> <span class="built_in">UIButton</span> *countdownBtn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">ViewController</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">IBAction</span>)countdownBtnClick:(<span class="built_in">UIButton</span> *)sender &#123;</span><br><span class="line">    [_countdownBtn startWithTime:<span class="number">5</span> title:<span class="string">@"获取验证码"</span> countDownTitle:<span class="string">@"s"</span> mainColor:[<span class="built_in">UIColor</span> colorWithRed:<span class="number">84</span>/<span class="number">255.0</span> green:<span class="number">180</span>/<span class="number">255.0</span> blue:<span class="number">98</span>/<span class="number">255.0</span> alpha:<span class="number">1.0</span>f] countColor:[<span class="built_in">UIColor</span> lightGrayColor]];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)didReceiveMemoryWarning &#123;</span><br><span class="line">    [<span class="keyword">super</span> didReceiveMemoryWarning];</span><br><span class="line">    <span class="comment">// Dispose of any resources that can be recreated.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p>这里主要的就是 <code>xib</code> 拉了一个 <code>button</code> 然后连接了它的属性和方法，我们可以看到就调用了</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[_countdownBtn startWithTime:<span class="number">5</span> title:<span class="string">@"获取验证码"</span> countDownTitle:<span class="string">@"s"</span> mainColor:[<span class="built_in">UIColor</span> colorWithRed:<span class="number">84</span>/<span class="number">255.0</span> green:<span class="number">180</span>/<span class="number">255.0</span> blue:<span class="number">98</span>/<span class="number">255.0</span> alpha:<span class="number">1.0</span>f] countColor:[<span class="built_in">UIColor</span> lightGrayColor]];&#125;</span><br></pre></td></tr></table></figure><p>这一句代码，就完成了倒计时功能。<br>这里我写了一个 <code>category</code> ，里面代码是这样的</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  UIButton+countDown.m</span></span><br><span class="line"><span class="comment">//  LiquoriceDoctorProject</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by HenryCheng on 15/12/4.</span></span><br><span class="line"><span class="comment">//  Copyright © 2015年 iMac. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">"UIButton+countDown.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">UIButton</span> (<span class="title">countDown</span>)</span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)startWithTime:(<span class="built_in">NSInteger</span>)timeLine title:(<span class="built_in">NSString</span> *)title countDownTitle:(<span class="built_in">NSString</span> *)subTitle mainColor:(<span class="built_in">UIColor</span> *)mColor countColor:(<span class="built_in">UIColor</span> *)color &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//倒计时时间</span></span><br><span class="line">    __block <span class="built_in">NSInteger</span> timeOut = timeLine;</span><br><span class="line">    <span class="built_in">dispatch_queue_t</span> queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</span><br><span class="line">    dispatch_source_t _timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, <span class="number">0</span>, <span class="number">0</span>, queue);</span><br><span class="line">    <span class="comment">//每秒执行一次</span></span><br><span class="line">    dispatch_source_set_timer(_timer, dispatch_walltime(<span class="literal">NULL</span>, <span class="number">0</span>), <span class="number">1.0</span> * <span class="built_in">NSEC_PER_SEC</span>, <span class="number">0</span>);</span><br><span class="line">    dispatch_source_set_event_handler(_timer, ^&#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//倒计时结束，关闭</span></span><br><span class="line">        <span class="keyword">if</span> (timeOut &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            dispatch_source_cancel(_timer);</span><br><span class="line">            <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                <span class="keyword">self</span>.backgroundColor = mColor;</span><br><span class="line">                [<span class="keyword">self</span> setTitle:title forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">                <span class="keyword">self</span>.userInteractionEnabled = <span class="literal">YES</span>;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">int</span> allTime = (<span class="keyword">int</span>)timeLine + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">int</span> seconds = timeOut % allTime;     </span><br><span class="line">            <span class="built_in">NSString</span> *timeStr = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%0.2d"</span>, seconds];</span><br><span class="line">            <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                <span class="keyword">self</span>.backgroundColor = color;</span><br><span class="line">                [<span class="keyword">self</span> setTitle:[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"%@%@"</span>,timeStr,subTitle] forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">                <span class="keyword">self</span>.userInteractionEnabled = <span class="literal">NO</span>;</span><br><span class="line">            &#125;);</span><br><span class="line">            timeOut--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_resume(_timer);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p>关于这个方法的定义</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  UIButton+countDown.h</span></span><br><span class="line"><span class="comment">//  LiquoriceDoctorProject</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">//  Created by HenryCheng on 15/12/4.</span></span><br><span class="line"><span class="comment">//  Copyright © 2015年 iMac. All rights reserved.</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">UIButton</span> (<span class="title">countDown</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  倒计时按钮</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @param timeLine 倒计时总时间</span></span><br><span class="line"><span class="comment"> *  @param title    还没倒计时的title</span></span><br><span class="line"><span class="comment"> *  @param subTitle 倒计时中的子名字，如时、分</span></span><br><span class="line"><span class="comment"> *  @param mColor   还没倒计时的颜色</span></span><br><span class="line"><span class="comment"> *  @param color    倒计时中的颜色</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)startWithTime:(<span class="built_in">NSInteger</span>)timeLine title:(<span class="built_in">NSString</span> *)title countDownTitle:(<span class="built_in">NSString</span> *)subTitle mainColor:(<span class="built_in">UIColor</span> *)mColor countColor:(<span class="built_in">UIColor</span> *)color;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p>试想，如果你有多个界面用到这样的倒计时按钮，比如什么登录注册、修改密码啥的，直接调用一个方法，会不会很方便？<br>上面的 <code>Demo</code> 所有的代码可以在 <a href="https://github.com/Loveway/HWCountdownDemo" target="_blank" rel="noopener">这里</a> 看到<br>当然，这里只是简单地自定义，你还可以在里面做更多的操作，比如加点动画什么的。之前写过 <code>Swift</code> 的一些倒计时的例子，如果你有兴趣，可以看看下面的效果</p><p><img src="https://upload-images.jianshu.io/upload_images/571495-660b933d7d87c45b.gif?imageMogr2/auto-orient/strip" alt="加动画的倒计时按钮"><br>代码在<a href="https://github.com/Loveway/CHWCountdownBtn" target="_blank" rel="noopener">这里</a>可以看到</p><h2 id="复合语句在-Objective-C-中的使用"><a href="#复合语句在-Objective-C-中的使用" class="headerlink" title="复合语句在 Objective-C 中的使用"></a>复合语句在 Objective-C 中的使用</h2><p>之前在一篇文章中看到过一次介绍复合语句在iOS中的使用，这里跟大家分享一下。<br>比如我们一般写一个 <code>tableView</code> 一般都是向下面这种写法写的</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">        <span class="keyword">self</span>.myTableView = [[<span class="built_in">UITableView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="built_in">CGRectGetWidth</span>(<span class="keyword">self</span>.view.frame), <span class="built_in">CGRectGetHeight</span>(<span class="keyword">self</span>.view.frame)) style:<span class="built_in">UITableViewStyleGrouped</span>];</span><br><span class="line">        <span class="keyword">self</span>.myTableView.dataSource = <span class="keyword">self</span>;</span><br><span class="line">        <span class="keyword">self</span>.myTableView.delegate = <span class="keyword">self</span>;</span><br><span class="line">        [<span class="keyword">self</span>.view addSubview:<span class="keyword">self</span>.myTableView];</span><br></pre></td></tr></table></figure><p>使用复合语句的话就是把整个代码块放在 <code>（</code> 和 <code>{</code> 里面，看起来更清晰，如下</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">self</span>.myTableView = (&#123; <span class="built_in">UITableView</span> *tableView = [[<span class="built_in">UITableView</span> alloc] initWithFrame:<span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="built_in">CGRectGetWidth</span>(<span class="keyword">self</span>.view.frame), <span class="built_in">CGRectGetHeight</span>(<span class="keyword">self</span>.view.frame)) style:<span class="built_in">UITableViewStyleGrouped</span>];</span><br><span class="line">        tableView.dataSource = <span class="keyword">self</span>;</span><br><span class="line">        tableView.delegate = <span class="keyword">self</span>;</span><br><span class="line">        [<span class="keyword">self</span>.view addSubview:tableView];</span><br><span class="line">        tableView;</span><br><span class="line">       &#125;);</span><br></pre></td></tr></table></figure><p>其实上面两段代码意思完全一样，只不过写法不同罢了，第二段看起来更炫酷，快去试试吧！</p></div><div><div id="reward-container"><button id="reward-button" disable="enable" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">赏</button><div>若您觉得我的文章对你有帮助，欢迎点击上方按钮对我打赏！</div><div id="qr" style="display:none"><div style="display:inline-block"><img src="/images/wechat_pay.jpeg" alt="HenryCheng 微信打赏"><p>微信打赏</p></div><div style="display:inline-block"><img src="/images/alipay.jpeg" alt="HenryCheng 支付宝打赏"><p>支付宝打赏</p></div></div></div></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">------------- 本文结束<i class="fa fa-heart"></i> 感谢您的阅读 -------------</div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/iOS/" rel="tag"><i class="fa fa-tag"></i> iOS</a><a href="/tags/倒计时/" rel="tag"><i class="fa fa-tag"></i> 倒计时</a></div><div class="post-widgets"><div class="wp_rating"><div id="wpac-rating"></div></div></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/posts/ded9fb65/" rel="next" title="runtime 那些事（消息机制）"><i class="fa fa-chevron-left"></i> runtime 那些事（消息机制）</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/posts/d1592f56/" rel="prev" title="iOS 实现自定义的弹出视图（popView）">iOS 实现自定义的弹出视图（popView）<i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div><div class="comments" id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC80NTA4OC8yMTYwNQ=="></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><div class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/uploads/loveway.jpg" alt="HenryCheng"><p class="site-author-name" itemprop="name">HenryCheng</p><div class="site-description motion-element" itemprop="description">这里荒芜寸草不生 后来你来这走了一遭 奇迹般万物生长 这里是我的心</div></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">17</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">6</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">24</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/Loveway" title="GitHub &rarr; https://github.com/Loveway" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a></span><span class="links-of-author-item"><a href="https://weibo.com/2071869814/profile?topnav=1&wvr=6" title="Weibo &rarr; https://weibo.com/2071869814/profile?topnav=1&wvr=6" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span><span class="links-of-author-item"><a href="https://www.jianshu.com/users/233c37d8a732/latest_articles" title="Jianshu &rarr; https://www.jianshu.com/users/233c37d8a732/latest_articles" rel="noopener" target="_blank"><i class="fa fa-fw fa-book"></i> Jianshu</a></span><span class="links-of-author-item"><a href="mailto:clearloveway@gmail.com" title="E-Mail &rarr; mailto:clearloveway@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span></div></div></div><div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#倒计时问题"><span class="nav-number">1.</span> <span class="nav-text">倒计时问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#复合语句在-Objective-C-中的使用"><span class="nav-number">2.</span> <span class="nav-text">复合语句在 Objective-C 中的使用</span></a></li></ol></div></div></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2016 – <span itemprop="copyrightYear">2019</span><span class="with-love" id="animate"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">HenryCheng</span></div><div class="mail-info">愿你出走半生，归来仍是少年</div><div class="powered-by">由 <a class="theme-link" href="https://loveway.github.io">HenryCheng</a> 基于 <a class="theme-link" href="https://hexo.io">Hexo</a> 而作</div><span class="post-meta-divider">|</span><div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a></div><span class="post-meta-divider">| <span class="post-count">全站共 27.8k 字</span></span><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="run_time"><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><script>function createtime(){var n=new Date("07/27/2016 00:00:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="本站已安全运行 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}var now=new Date;setInterval("createtime()",250)</script></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item-icon"><i class="fa fa-user"></i></span> <span class="site-uv" title="总访客量">本站访客数：<span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 人</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-"></i></span> <span class="site-pv" title="总访问量">本站总访问量：<span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script>"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script src="/lib/jquery/index.js?v=3.4.1"></script><script src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script src="/js/utils.js?v=7.2.0"></script><script src="/js/motion.js?v=7.2.0"></script><script src="/js/schemes/muse.js?v=7.2.0"></script><script src="/js/scrollspy.js?v=7.2.0"></script><script src="/js/post-details.js?v=7.2.0"></script><script src="/js/next-boot.js?v=7.2.0"></script><script>window.livereOptions={refer:"posts/bab0ff15/"},function(e,t){var n,r=e.getElementsByTagName(t)[0];"function"!=typeof LivereTower&&((n=e.createElement(t)).src="https://cdn-city.livere.com/js/embed.dist.js",n.async=!0,r.parentNode.insertBefore(n,r))}(document,"script")</script><script>wpac_init = window.wpac_init || [];
    wpac_init.push({
      widget: 'Rating',
      id: ,
      el: 'wpac-rating',
      color: 'fc6423'
    });
    (function() {
      if ('WIDGETPACK_LOADED' in window) return;
      WIDGETPACK_LOADED = true;
      var mc = document.createElement('script');
      mc.type = 'text/javascript';
      mc.async = true;
      mc.src = '//embed.widgetpack.com/widget.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(mc, s.nextSibling);
    })();</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{scale:1.5,hHeadPos:.5,vHeadPos:.618,jsonPath:"/live2dw/assets/koharu.model.json"},display:{position:"right",width:150,height:300,hOffset:10,vOffset:120},mobile:{show:!0,scale:.5},react:{opacityDefault:.7,opacityOnHover:.2},log:!1})</script></body></html><script type="text/javascript" src="/js/dynamic_bg.js"></script>